#!/bin/sh
sudo eopkg up
sudo eopkg it -c system.devel
sudo eopkg rm celluloid gnome-mpv gnome-terminal hexchat libreoffice-common mate-terminal nautilus onboard rhythmbox

desktop="bleachbit caja devilspie2 engrampa goverlay keepassx kitty libstrangle mpv qutebrowser rofi"
dev="git-extras jq neovim pip solbuild-config-local-unstable"
multimedia="audacity feh gmic-gimp libva-utils mpv quodlibet spek viewnior zathura-poppler"
terminal="advancecomp aria2 autojump busybox fd fish innoextract most ncdu p7zip ripgrep speedtest-cli stow tmux"
sudo eopkg it $desktop $terminal
sudo pip3 install --upgrade qutebrowser breadability

rm ~/.bashrc
cd ~/.dotfiles
for i in `fd -E .git -t d -H`; do
    mkdir -p ~/$i
done
stow .

mkdir -p ~/.config/mpv/shaders; cd ~/.config/mpv/shaders
curl -fsSL $(curl -fsSL https://api.github.com/repos/bloc97/Anime4K/releases/latest | jq .assets[].browser_download_url | sed 's/"//g') | busybox unzip -

curl -fLo ~/.config/nvim/autoload/plug.vim --create-dirs https://github.com/junegunn/vim-plug/raw/master/plug.vim
nvim +PlugUpdate +q +q

curl -fsSL https://starship.rs/install.sh | sudo bash -s -- -b /usr/bin -y

chsh -s /usr/bin/fish

sh -c "$(curl -sL https://nextdns.io/install)"

for i in tracker-store tracker-mine-fs tracker-miner-rss tracker-extra tracker-miner-apps tracker-writeback; do
    systemctl --user mask $i.service
    sudo systemctl mask $i.service
done
tracker reset --hard
