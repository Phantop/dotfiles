#!/bin/bash
sudo eopkg up
sudo eopkg it -c system.devel
gnome=$(eval echo eog file-roller gnome-{calendar,photos,mpv,terminal} nautilus onboard rhythmbox)
sudo eopkg rm celluloid firefox $gnome hexchat libreoffice-common thunderbird

audio="audacious audacious-plugins audacity opus-tools quodlibet spek"
dev="docker-compose git-extras neovim openssh-server parallelpip solbuild tig tor upx"
gui="bleachbit caja engrampa goverlay keepassx kitty libstrangle qutebrowser rofi"
media="feh gmic-gimp mpv playerctl usbmuxd rsync viewnior zathura-poppler"
rice="adapta-gtk-theme devilspie2 font-ubuntu-ttf stow"
term="advancecomp aria2 autojump fd fish fzf innoextract most ncdu p7zip ripgrep tmux"
sudo eopkg it $audio $dev $gui $media $rice $term
sudo pip3 install --upgrade qutebrowser breadability

rm ~/.bashrc
cd ~/.dotfiles
for i in `fd -E .git -t d -H`; do
    mkdir -p ~/$i
done
stow .

mkdir -p ~/.config/mpv/shaders && cd ~/.config/mpv/shaders && rm *
curl https://api.github.com/repos/bloc97/Anime4K/releases/latest | grep -wo http.\*zip | aria2c -i-; unzip *; rm *zip

aria2c https://github.com/junegunn/vim-plug/raw/master/plug.vim -d ~/.config/nvim/autoload
nvim +PlugUpdate +q +q

curl -fsSL https://starship.rs/install.sh | sudo bash -s -- -b /usr/bin -y
chsh -s /usr/bin/fish

sh -c "$(curl -sL https://nextdns.io/install)"
sudo nextdns install
sudo nextdns start

sudo systemctl mask tracker-{store,mine-fs,miner-rss,extra,miner-apps,writeback}
sudo systemctl enable --now docker tor
sudo usermod -aG docker $USER

git g gh:Phantop/solus-stuff ~/.solus
git g gh:iv-org/invidious ~/.invidious
git g gh:Phantop/phantop.github.io ~/.site
git g gh:Phantop/haiku-icons ~/.local/share/icons/haiku-icons

~/.solus/build
fish -c "invidious;clean;re"
