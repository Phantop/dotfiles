#!/bin/sh
# shellcheck disable=SC2086
alias s=sudo se="s eopkg -y" g=git

gnome="gnome-photos gnome-mpv gnome-terminal nautilus rhythmbox"
se rm $gnome firefox libreoffice-common onboard thunderbird

dev="arcanist ccache git-extras llvm-clang neovim parallel qt-creator solbuild"
gui="caja gimp keepassxc kitty nicotine-plus qutebrowser syncthing zathura-mupdf"
med="audaci{ty,ous{,-plugins}} avidemux mkvtoolnix mpv opus-tools spek yt-dlp"
ric="ant-dracula-gtk-theme autojump font-ubuntu-ttf rofi starship sassc stow"
tui="advancecomp aria2 fd fish fzf innoextract jpegoptim moreutils ncdu ripgrep tig"
sys="bleachbit corectrl ifuse linux-tools-cpupower p7zip tlp usbmuxd upx tor"
se up; se it -c system.devel $dev $gui $med $ric $sys $tui

stow --no-folding -d ~/.dotfiles -t ~/.config .
stow --no-folding -d ~/.dotfiles -t ~/.local/bin bin
mkdir -p ~/.parallel/will-cite
echo source ~/.config/bashrc > ~/.bashrc
ln -s ~/.config/gtk-3.0/gtkrc ~/.gtkrc-2.0

wget https://github.com/dracula/kitty/raw/master/dracula.conf -P ~/.config/kitty
wget https://github.com/dracula/rofi/raw/master/theme/config2.rasi -P ~/.config/rofi
wget https://github.com/savq/paq-nvim/raw/master/lua/paq.lua -P ~/.config/nvim/lua
wget https://source.netsurf-browser.org/netsurf.git/plain/resources/adblock.css\
    https://nitter.it/css/themes/dracula.css -P ~/.config/qutebrowser
un(){ F=$(mktemp); mkdir -p "$2"; curl https://api.github.com/repos/"$1"/releases |\
      grep -om1 http.\*zip | wget -i- -O"$F"; unzip "$F" -d "$2";}
un bloc97/Anime4k ~/.config/mpv/shaders
un mozilla/pdf.js ~/.local/share/qutebrowser/pdfjs
pip3 install adblock pipx-in-pipx readability-lxml

chsh -s "$(which fish)"
fish -c "aliases;clean"
s usermod -aG docker "$USER"
s systemctl mask tracker-store tracker-miner-fs tracker-miner-rss tracker-miner-apps tracker-extra tracker-writeback

g g p:appdwarf ~/.appdwarf
g g p:solus-stuff ~/.solus
g g p:phantop.github.io ~/.site
g g p:haiku-icons ~/.local/share/icons/Haiku
nvim +PaqInstall +q

parallel gsettings set org.gnome.desktop.interface {}-theme Haiku ::: cursor icon
gsettings set org.gnome.desktop.interface gtk-theme Ant-Dracula
