#!/usr/bin/fish
alias a 'alias -s'

a D 'cd $D'
a aliases 'v (which aliases); command aliases'
a all2jxl 'fd -e{png,jpg} -x cjxl -e 8 -d 0 {} {.}.jxl && fd -e{png,jpg} -x rm'
a base64d 'echo (echo $argv | base64 -d 2>/dev/null);:'
a bax 'source (which bax) && bax'
a cd 'cd (realpath $argv 2> /dev/null);:'
a clip 'xclip -sel clip'
a cpugov 's cpupower frequency-set -g performance'
a dirdl 'wget -r -k -p --no-parent --no-clobber -e robots=off -R "index.html*"'
a dl 'not test "$argv" && cd ~/Downloads || aria2c -c -x16 -s16'
a dot 'cd ~/.dotfiles'
a ff 'fd -HILi -Edosdevices -E.git'
a g git
a giveme 's chown $USER'
a hardinfo 'inxi -SPARM -GCDN -v1 -xGCRS -Fxz'
a imgsum 'printf "$argv: " && identify -format "%#\n"'
a l ls
a la 'l -a'
a less 'eval $PAGER'
a off shutdown
a offh 'off (math "60*"$argv);:'
a open xdg-open
a pagedl 'wget -H -k -p --no-clobber -e robots=off'
a png2webp 'fd -e png -x cwebp -z 9 -mt {} -o {.}.webp && fd -e png -x rm'
a qutainer 'qutebrowser -B /tmp'
a rmdirs 'ff -t d -x rmdir -p'
a rmlinks 'ff -t l -x rm'
a qb 'qutebrowser --target auto'
a re 'systemctl reboot -i'
a s 'sudo env "PATH=$PATH"'
a se 's eopkg'
a spleet 'spleeter separate -o . -c flac'
a ta 'tmux a -t (math 0 + "0$argv");:'
a tar bsdtar
a twitch-dl 'ffmpeg -i (ydl -e $argv[1]|tr / _) -c copy $argv[2..-1] "file:(ydl -g $argv[1]).mkv"'
a up 'se up --y'
a v vi
a vi nvim
a wallp 'gsettings set org.gnome.desktop.background picture-uri file://(realpath $argv);:'
a wm 'startx (which $argv[1]; argv[2..-1])'

a ao3 'egrep works/[0-9]+ $argv -o | uniq | tr -d a-z | parallel aria2c "https://ao3.org/downloads{}/\*.epub" -d ao3; rm'
a invid 'tmux new -s 0 -d "docker-compose -f ~/.config/invid.yml up --build"'
a launcher 'rofi -combi-modi "drun,run" -show combi -modi "combi,window"'
a listen 'pactl list | grep loop && pactl unload-module module-loopback || pactl load-module module-loopback'
a symlinks 'fd -td -d1 . $D -x  sh -c "rm ~/{/}; rmdir ~/{/}; ln -s {} ~/{/}"'
a tcsv 'curl -sL http://torrents-csv.ml/service/search?q="$argv"|jq ".[]|.name,.infohash,.seeders";:'
a ydl 'yt-dlp -ciw --write-sub --write-auto-sub --embed-subs --sub-lang=en -o "%(title)s.%(ext)s"'

a compress '7z a -m0=flzma2 -mx9 -mmt=8 -mfb=273 -md=256m -ms=on (realpath $argv[1]).7z'
a dwarf 'mkdwarfs -i . -o $PWD.dwarfs'
a redwarf 'mkdwarfs -o redwarf.dwarfs --recompress -i'
a squash 'mksquashfs . $PWD.squashfs -comp zstd -b 1M -Xcompression-level 22'
a undwarfs 'mkdir dwarfs-root; dwarfsextract -o dwarfs-root -i'

for i in (cat ~/.config/qutebrowser/quickmarks | cut -d ' ' -f1)
    a $i "qb / \":quickmark-load $i\""
end

for i in getnative mcross nsz scdl spleeter thonny
    a $i "pipx run $i"
end
